<html>

<head>
    <title>Dual Connected Links Demo</title>
    <script type="text/javascript" src='dist/vivagraph.js'></script>
    <script type="text/javascript">
        function main() {
            var graph = Viva.Graph.graph();

            var layout = Viva.Graph.Layout.forceDirected(graph, {
                springLength: 200
            });
            // Construct the graph
            graph.addNode('influxdata', { url: 'https://www.influxdata.com/wp-content/uploads/influx-regular-black.jpg' });
            graph.addNode('influxdb', { url: 'https://influxdata.github.io/branding/img/logo-variations/influx-db.svg' });
            graph.addNode('telegraf', { url: 'https://influxdata.github.io/branding/img/logo-variations/telegraf.svg' });
            graph.addNode('chronograf', { url: 'https://influxdata.github.io/branding/img/logo-variations/chronograf.svg' });
            graph.addNode('elasticsearch', { url: 'https://secure.gravatar.com/avatar/01bce7702975191fdc402565bd1045a8?' });
            graph.addNode('datadogcloud', { url: 'https://secure.gravatar.com/avatar/13da974fc9716b42f5d62e3c8056c718' });
            graph.addNode('datadogloggin', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });
            graph.addNode('kibana', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });
            graph.addNode('logstash', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });
            graph.addNode('graphite', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });
            graph.addNode('grafana', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });
            graph.addNode('icinga', { url: 'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd' });

            graph.addLink('influxdata', 'influxdb');
            graph.addLink('influxdata', 'telegraf');
            graph.addLink('influxdata', 'chronograf');
            graph.addLink('datadogcloud', 'elasticsearch');
            graph.addLink('datadogcloud', 'datadogloggin');
            graph.addLink('kibana', 'elasticsearch');
            graph.addLink('logstash', 'elasticsearch');
            graph.addLink('graphite', 'grafana');
            graph.addLink('graphite', 'icinga');
            graph.addLink('graphite', 'influxdb');
            graph.addLink('grafana', 'influxdb');
            graph.addLink('grafana', 'elasticsearch');

            // Set custom nodes appearance
            var graphics = Viva.Graph.View.svgGraphics();
            graphics.node(function (node) {
                // The function is called every time renderer needs a ui to display node
                return Viva.Graph.svg('image')
                    .attr('width', 80)
                    .attr('height', 80)
                    .link(node.data.url); // node.data holds custom object passed to graph.addNode();
            })
                .placeNode(function (nodeUI, pos) {
                    // Shift image to let links go to the center:
                    nodeUI.attr('x', pos.x - 22).attr('y', pos.y - 22);
                });

            var renderer = Viva.Graph.View.renderer(graph, {
                graphics: graphics, 
                layout: layout
            });
            renderer.run();
        }
    </script>
    <style type="text/css">
        html,
        body,
        svg {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body onload='main()'>

</body>

</html>